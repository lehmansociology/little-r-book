---
output:
  html_document: default
  word_document: default
---
# Statistical Functions (for one variable)

Here are some basic statistical functions you should really know by heart. 
Most of them are obvious if you think about them.
You should also know the formula or other calculation procedures for these.

These will be presented using the $ format and some commonly used sample data sets. The na.rm option is included because 
you are always safer using it.

## These are from core R

That means the base and stats packages.

```{r}
# Mean
mean(chickwts$weight, na.rm = TRUE)

# Variance (for a sample)
var(chickwts$weight, na.rm = TRUE)

# Variance (for a population)
# There is no simple function for this.  The code below shows one possible way
# The length() function gives you the total rows and na.omit() ensures that you 
# are not counting NAs, since they are not in the calculation of var(). 
var(chickwts$weight, na.rm = TRUE)*  
                         (length(na.omit(chickwts$weight)) - 1)/
                         length(chickwts$weight)

# Standard deviation (for a sample)
sd(chickwts$weight, na.rm = TRUE)

# Note there is no simple conversion from sample standard deviation
# to population standard deviation.
# Calculate the population variance and take the square root. See the next
# section.

# Median
median(chickwts$weight, na.rm = TRUE)

# Quantiles (you specify which ones you want)
quantile(chickwts$weight, probs = c(.25, .50, .75), na.rm = TRUE)

# Minimum
min(chickwts$weight, na.rm = TRUE)

# Maximum 
max(chickwts$weight, na.rm = TRUE)

# Table
# This is normally used for factor variables
table(chickwts$feed, useNA = "ifany")

```
Also you should know that the summary() function can be used on almost object and will give you results depending on what that 
object is.

```{r}
summary(chickwts)
```

```{r}
summary(chickwts$weight)
```
```{r}
summary(chickwts$feed)
```

## These are from lehmansociology

Since that is a package you either need to load it with library() or use the notation we use here.


```{r}
# MODE
# Notice that you must use all upper case. This is because there is
# already a function called mode in base r that does something 
# completely unrelated.
lehmansociology::MODE(chickwts$feed)


# frequency
lehmansociology::frequency(chickwts$feed)

# Variance for a population
# This is similar to the VARP function in most spreadsheets
lehmansociology::varp(chickwts$weight)

# Standard deviation for a population 
# This is similar to the STDEVP
lehmansociology::sdp(chickwts$weight)
```

## These are from the Janitor package

Since it is a package you must load it.
For producing single variable frequencies use tabyl().
It is usually used with the `%>%` or "pipe" operator from the maggritr  package. 

```{r message=FALSE}
library(janitor)
library(magrittr)
chickwts %>% tabyl(feed)

```

Janitor uses adorn_ functions to add extra details or formatting to tables. 
```{r}
chickwts %>% tabyl(feed) %>% 
             adorn_pct_formatting()
```

The lehmansociology package includes extra adorn_ functions for cumulative distributions.

```{r message=FALSE}
library(lehmansociology)
chickwts %>% tabyl(weight)  %>%
            adorn_cumulative() %>%
            adorn_cumulative_percentages() 
```
You can add adorn_cum_pct_formatting to put the proportions into percent format.

```{r}
chickwts %>% tabyl(weight)  %>%
            adorn_pct_formatting() %>%
            adorn_cumulative() %>%
            adorn_cumulative_percentages() %>%
            adorn_cum_pct_formatting()
```

To do a cross tab (also known as two-way table or contingency table) we also use `table()`. The basic function
just gives counts for each combination.

```{r}
mtcars %>% tabyl(cyl, gear)
```

```{r}
mtcars %>% tabyl(cyl, gear)
```

```{r}
mtcars %>% tabyl(cyl, gear) %>%
      adorn_percentages(denominator = "col") %>%
      adorn_pct_formatting() %>%
      adorn_title()
```

You can include both numbers and percentages.

```{r}
mtcars %>% tabyl(cyl, gear) %>%
      adorn_percentages(denominator = "col") %>%
      adorn_pct_formatting() %>%
      adorn_ns %>%
      adorn_title()
```

## Conclusion

This chapter presents just a handful of R functions and their many options As you gain experience using
R you should read the help files, vignettes and online resources to learn more.

