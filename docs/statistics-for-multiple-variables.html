<!DOCTYPE html>
<html >

<head>

  <meta charset="UTF-8">
  <meta http-equiv="X-UA-Compatible" content="IE=edge">
  <title>Chapter 5 Statistics for Multiple Variables | A Little R Book for Lehman Sociology Students</title>
  <meta name="description" content="Things you should know or that may help with R">
  <meta name="generator" content="bookdown  and GitBook 2.6.7">

  <meta property="og:title" content="Chapter 5 Statistics for Multiple Variables | A Little R Book for Lehman Sociology Students" />
  <meta property="og:type" content="book" />
  
  
  <meta property="og:description" content="Things you should know or that may help with R" />
  <meta name="github-repo" content="lehmansociology/book" />

  <meta name="twitter:card" content="summary" />
  <meta name="twitter:title" content="Chapter 5 Statistics for Multiple Variables | A Little R Book for Lehman Sociology Students" />
  
  <meta name="twitter:description" content="Things you should know or that may help with R" />
  

<meta name="author" content="Lehman Sociology">


<meta name="date" content="2019-02-11">

  <meta name="viewport" content="width=device-width, initial-scale=1">
  <meta name="apple-mobile-web-app-capable" content="yes">
  <meta name="apple-mobile-web-app-status-bar-style" content="black">
  
  
<link rel="prev" href="errors.html">
<link rel="next" href="graphs.html">
<script src="libs/jquery-2.2.3/jquery.min.js"></script>
<link href="libs/gitbook-2.6.7/css/style.css" rel="stylesheet" />
<link href="libs/gitbook-2.6.7/css/plugin-table.css" rel="stylesheet" />
<link href="libs/gitbook-2.6.7/css/plugin-bookdown.css" rel="stylesheet" />
<link href="libs/gitbook-2.6.7/css/plugin-highlight.css" rel="stylesheet" />
<link href="libs/gitbook-2.6.7/css/plugin-search.css" rel="stylesheet" />
<link href="libs/gitbook-2.6.7/css/plugin-fontsettings.css" rel="stylesheet" />









<style type="text/css">
div.sourceCode { overflow-x: auto; }
table.sourceCode, tr.sourceCode, td.lineNumbers, td.sourceCode {
  margin: 0; padding: 0; vertical-align: baseline; border: none; }
table.sourceCode { width: 100%; line-height: 100%; }
td.lineNumbers { text-align: right; padding-right: 4px; padding-left: 4px; color: #aaaaaa; border-right: 1px solid #aaaaaa; }
td.sourceCode { padding-left: 5px; }
code > span.kw { color: #007020; font-weight: bold; } /* Keyword */
code > span.dt { color: #902000; } /* DataType */
code > span.dv { color: #40a070; } /* DecVal */
code > span.bn { color: #40a070; } /* BaseN */
code > span.fl { color: #40a070; } /* Float */
code > span.ch { color: #4070a0; } /* Char */
code > span.st { color: #4070a0; } /* String */
code > span.co { color: #60a0b0; font-style: italic; } /* Comment */
code > span.ot { color: #007020; } /* Other */
code > span.al { color: #ff0000; font-weight: bold; } /* Alert */
code > span.fu { color: #06287e; } /* Function */
code > span.er { color: #ff0000; font-weight: bold; } /* Error */
code > span.wa { color: #60a0b0; font-weight: bold; font-style: italic; } /* Warning */
code > span.cn { color: #880000; } /* Constant */
code > span.sc { color: #4070a0; } /* SpecialChar */
code > span.vs { color: #4070a0; } /* VerbatimString */
code > span.ss { color: #bb6688; } /* SpecialString */
code > span.im { } /* Import */
code > span.va { color: #19177c; } /* Variable */
code > span.cf { color: #007020; font-weight: bold; } /* ControlFlow */
code > span.op { color: #666666; } /* Operator */
code > span.bu { } /* BuiltIn */
code > span.ex { } /* Extension */
code > span.pp { color: #bc7a00; } /* Preprocessor */
code > span.at { color: #7d9029; } /* Attribute */
code > span.do { color: #ba2121; font-style: italic; } /* Documentation */
code > span.an { color: #60a0b0; font-weight: bold; font-style: italic; } /* Annotation */
code > span.cv { color: #60a0b0; font-weight: bold; font-style: italic; } /* CommentVar */
code > span.in { color: #60a0b0; font-weight: bold; font-style: italic; } /* Information */
</style>

<link rel="stylesheet" href="style.css" type="text/css" />
</head>

<body>



  <div class="book without-animation with-summary font-size-2 font-family-1" data-basepath=".">

    <div class="book-summary">
      <nav role="navigation">

<ul class="summary">
<li><a href="./">A Book of Useful R Information</a></li>

<li class="divider"></li>
<li class="chapter" data-level="" data-path="index.html"><a href="index.html"><i class="fa fa-check"></i>Preface</a></li>
<li class="chapter" data-level="1" data-path="introduction.html"><a href="introduction.html"><i class="fa fa-check"></i><b>1</b> Introduction</a></li>
<li class="chapter" data-level="2" data-path="statistical-functions-for-one-variable.html"><a href="statistical-functions-for-one-variable.html"><i class="fa fa-check"></i><b>2</b> Statistical Functions (for one variable)</a><ul>
<li class="chapter" data-level="2.1" data-path="statistical-functions-for-one-variable.html"><a href="statistical-functions-for-one-variable.html#these-are-from-core-r"><i class="fa fa-check"></i><b>2.1</b> These are from core R</a></li>
<li class="chapter" data-level="2.2" data-path="statistical-functions-for-one-variable.html"><a href="statistical-functions-for-one-variable.html#these-are-from-lehmansociology"><i class="fa fa-check"></i><b>2.2</b> These are from lehmansociology</a></li>
<li class="chapter" data-level="2.3" data-path="statistical-functions-for-one-variable.html"><a href="statistical-functions-for-one-variable.html#these-are-from-the-janitor-package"><i class="fa fa-check"></i><b>2.3</b> These are from the Janitor package</a></li>
<li class="chapter" data-level="2.4" data-path="statistical-functions-for-one-variable.html"><a href="statistical-functions-for-one-variable.html#from-the-rmisc-package-confidence-intervals"><i class="fa fa-check"></i><b>2.4</b> From the RMisc package (Confidence intervals)</a></li>
<li class="chapter" data-level="2.5" data-path="statistical-functions-for-one-variable.html"><a href="statistical-functions-for-one-variable.html#from-the-resample-package-bootstrap-confidence-intervals"><i class="fa fa-check"></i><b>2.5</b> From the resample package (bootstrap confidence intervals)</a></li>
<li class="chapter" data-level="2.6" data-path="statistical-functions-for-one-variable.html"><a href="statistical-functions-for-one-variable.html#conclusion"><i class="fa fa-check"></i><b>2.6</b> Conclusion</a></li>
</ul></li>
<li class="chapter" data-level="3" data-path="code.html"><a href="code.html"><i class="fa fa-check"></i><b>3</b> Code</a><ul>
<li class="chapter" data-level="3.1" data-path="code.html"><a href="code.html#assignment-operator"><i class="fa fa-check"></i><b>3.1</b> Assignment operator</a></li>
<li class="chapter" data-level="3.2" data-path="code.html"><a href="code.html#combine-function"><i class="fa fa-check"></i><b>3.2</b> Combine function</a></li>
<li class="chapter" data-level="3.3" data-path="code.html"><a href="code.html#pipe-operator"><i class="fa fa-check"></i><b>3.3</b> Pipe operator</a></li>
<li class="chapter" data-level="3.4" data-path="code.html"><a href="code.html#basic-math-operations"><i class="fa fa-check"></i><b>3.4</b> Basic math operations</a></li>
<li class="chapter" data-level="3.5" data-path="code.html"><a href="code.html#comparison-operators"><i class="fa fa-check"></i><b>3.5</b> Comparison operators</a></li>
<li class="chapter" data-level="3.6" data-path="code.html"><a href="code.html#and-and-or-logical-operators"><i class="fa fa-check"></i><b>3.6</b> AND and OR (logical operators)</a></li>
</ul></li>
<li class="chapter" data-level="4" data-path="errors.html"><a href="errors.html"><i class="fa fa-check"></i><b>4</b> Errors</a><ul>
<li class="chapter" data-level="4.1" data-path="errors.html"><a href="errors.html#could-not-find-function"><i class="fa fa-check"></i><b>4.1</b> Could not find function</a></li>
<li class="chapter" data-level="4.2" data-path="errors.html"><a href="errors.html#problems-with-variables"><i class="fa fa-check"></i><b>4.2</b> Problems with variables</a></li>
<li class="chapter" data-level="4.3" data-path="errors.html"><a href="errors.html#problems-with-markdown"><i class="fa fa-check"></i><b>4.3</b> Problems with markdown</a></li>
<li class="chapter" data-level="4.4" data-path="errors.html"><a href="errors.html#other-problems-when-knittng"><i class="fa fa-check"></i><b>4.4</b> Other problems when knittng</a></li>
</ul></li>
<li class="chapter" data-level="5" data-path="statistics-for-multiple-variables.html"><a href="statistics-for-multiple-variables.html"><i class="fa fa-check"></i><b>5</b> Statistics for Multiple Variables</a><ul>
<li class="chapter" data-level="5.1" data-path="statistics-for-multiple-variables.html"><a href="statistics-for-multiple-variables.html#using-formula-notation"><i class="fa fa-check"></i><b>5.1</b> Using formula notation</a><ul>
<li class="chapter" data-level="5.1.1" data-path="statistics-for-multiple-variables.html"><a href="statistics-for-multiple-variables.html#ordinary-linear-model"><i class="fa fa-check"></i><b>5.1.1</b> Ordinary Linear Model</a></li>
<li class="chapter" data-level="5.1.2" data-path="statistics-for-multiple-variables.html"><a href="statistics-for-multiple-variables.html#generalized-linear-model"><i class="fa fa-check"></i><b>5.1.2</b> Generalized Linear Model</a></li>
<li class="chapter" data-level="5.1.3" data-path="statistics-for-multiple-variables.html"><a href="statistics-for-multiple-variables.html#parametric-t-test"><i class="fa fa-check"></i><b>5.1.3</b> Parametric t test</a></li>
</ul></li>
<li class="chapter" data-level="5.2" data-path="statistics-for-multiple-variables.html"><a href="statistics-for-multiple-variables.html#using-group_by"><i class="fa fa-check"></i><b>5.2</b> Using group_by</a></li>
<li class="chapter" data-level="5.3" data-path="statistics-for-multiple-variables.html"><a href="statistics-for-multiple-variables.html#entry-of-variables"><i class="fa fa-check"></i><b>5.3</b> Entry of variables</a><ul>
<li class="chapter" data-level="5.3.1" data-path="statistics-for-multiple-variables.html"><a href="statistics-for-multiple-variables.html#cross-tabs"><i class="fa fa-check"></i><b>5.3.1</b> Cross tabs</a></li>
</ul></li>
</ul></li>
<li class="chapter" data-level="6" data-path="graphs.html"><a href="graphs.html"><i class="fa fa-check"></i><b>6</b> Graphs</a><ul>
<li class="chapter" data-level="6.1" data-path="graphs.html"><a href="graphs.html#how-ggplot-works"><i class="fa fa-check"></i><b>6.1</b> How ggplot works</a><ul>
<li class="chapter" data-level="6.1.1" data-path="graphs.html"><a href="graphs.html#ggplot"><i class="fa fa-check"></i><b>6.1.1</b> ggplot()</a></li>
<li class="chapter" data-level="6.1.2" data-path="graphs.html"><a href="graphs.html#adding-geom"><i class="fa fa-check"></i><b>6.1.2</b> Adding geom</a></li>
<li class="chapter" data-level="6.1.3" data-path="graphs.html"><a href="graphs.html#add-titles-and-labels-modify-axes"><i class="fa fa-check"></i><b>6.1.3</b> Add titles and labels, modify axes</a></li>
</ul></li>
<li class="chapter" data-level="6.2" data-path="graphs.html"><a href="graphs.html#common-problems"><i class="fa fa-check"></i><b>6.2</b> Common problems</a><ul>
<li class="chapter" data-level="6.2.1" data-path="graphs.html"><a href="graphs.html#unexpected-symbol"><i class="fa fa-check"></i><b>6.2.1</b> unexpected symbol</a></li>
<li class="chapter" data-level="6.2.2" data-path="graphs.html"><a href="graphs.html#invalid-argument-to-unary-operator"><i class="fa fa-check"></i><b>6.2.2</b> invalid argument to unary operator</a></li>
<li class="chapter" data-level="6.2.3" data-path="graphs.html"><a href="graphs.html#error-unexpected"><i class="fa fa-check"></i><b>6.2.3</b> Error: unexpected ‘)’</a></li>
</ul></li>
</ul></li>
<li class="chapter" data-level="7" data-path="other.html"><a href="other.html"><i class="fa fa-check"></i><b>7</b> Other</a></li>
<li class="divider"></li>
<li><a href="https://github.com/rstudio/bookdown" target="blank">Published with bookdown</a></li>

</ul>

      </nav>
    </div>

    <div class="book-body">
      <div class="body-inner">
        <div class="book-header" role="navigation">
          <h1>
            <i class="fa fa-circle-o-notch fa-spin"></i><a href="./">A Little R Book for Lehman Sociology Students</a>
          </h1>
        </div>

        <div class="page-wrapper" tabindex="-1" role="main">
          <div class="page-inner">

            <section class="normal" id="section-">
<div id="statistics-for-multiple-variables" class="section level1">
<h1><span class="header-section-number">Chapter 5</span> Statistics for Multiple Variables</h1>
<p>Most of the time we want to look at the relationship between two or more variables.</p>
<p>R has several different ways of working with multiple variables.</p>
<div id="using-formula-notation" class="section level2">
<h2><span class="header-section-number">5.1</span> Using formula notation</h2>
<p>In R a “forumula” is created using the <code>~</code> operator, which is found on the top left of the keyboard.</p>
<p>In these examples the formula operator always works like this: <code>dependent_variable ~ independent_variable</code> and if you have multiple independent_variables use a <code>+</code> to add them on the right.</p>
<p>One way to do crosstabs, also known as contingency tables, that uses the formula notation is to use the crosstab function from lehmansociology. This gives you the number of observations in each combination of the variables.</p>
<div class="sourceCode"><pre class="sourceCode r"><code class="sourceCode r">lehmansociology<span class="op">::</span><span class="kw">crosstab</span>(cyl <span class="op">~</span><span class="st"> </span>gear, <span class="dt">data =</span> mtcars, <span class="dt">title =</span> <span class="st">&quot;Cylinders by number of gears&quot;</span>)</code></pre></div>
<pre><code>## Cylinders by number of gears
##         3  4  5
## 4       1  8  2
## 6       2  4  1
## 8       12 0  2
## Total N 15 12 5</code></pre>
<div class="sourceCode"><pre class="sourceCode r"><code class="sourceCode r">lehmansociology<span class="op">::</span><span class="kw">crosstab</span>(cyl <span class="op">~</span><span class="st"> </span>gear, <span class="dt">data =</span> mtcars, <span class="dt">title =</span> <span class="st">&quot;Cylinders by number of gears&quot;</span>, <span class="dt">format =</span> <span class="st">&quot;column_percent&quot;</span>)</code></pre></div>
<pre><code>## Cylinders by number of gears
##         3    4    5 
## 4       6.7  66.7 40
## 6       13.3 33.3 20
## 8       80   0    40
## Total N 15   12   5</code></pre>
<p>(You can also use the Janitor tabyl function to make cross tabs, this is explained in the next section.)</p>
<div class="sourceCode"><pre class="sourceCode r"><code class="sourceCode r"><span class="kw">library</span>(Rmisc)
<span class="kw">group.CI</span>(weight <span class="op">~</span><span class="st"> </span>feed, 
         <span class="dt">data =</span> chickwts, <span class="dt">ci =</span> .<span class="dv">90</span>) </code></pre></div>
<pre><code>##        feed weight.upper weight.mean weight.lower
## 1    casein     356.9876    323.5833     290.1791
## 2 horsebean     182.5907    160.2000     137.8093
## 3   linseed     245.8304    218.7500     191.6696
## 4  meatmeal     312.3758    276.9091     241.4424
## 5   soybean     272.0480    246.4286     220.8092
## 6 sunflower     354.2348    328.9167     303.5986</code></pre>
<p>You can also use the formula notation for a model with no independent variable by substituting a constant on the right side.</p>
<div class="sourceCode"><pre class="sourceCode r"><code class="sourceCode r"><span class="kw">group.CI</span>(weight <span class="op">~</span><span class="st"> </span><span class="dv">1</span>, 
         <span class="dt">data =</span> chickwts, <span class="dt">ci =</span> .<span class="dv">90</span>) </code></pre></div>
<pre><code>##   weight.upper weight.mean weight.lower
## 1     276.7549    261.3099     245.8648</code></pre>
<div id="ordinary-linear-model" class="section level3">
<h3><span class="header-section-number">5.1.1</span> Ordinary Linear Model</h3>
<p>(This means it has an interval dependent variable.) This works in the same way as group.CI, dependent variable on the left, independent on the right.</p>
<div class="sourceCode"><pre class="sourceCode r"><code class="sourceCode r"><span class="kw">lm</span>(raises <span class="op">~</span><span class="st"> </span>critical, <span class="dt">data =</span> attitude)</code></pre></div>
<pre><code>## 
## Call:
## lm(formula = raises ~ critical, data = attitude)
## 
## Coefficients:
## (Intercept)     critical  
##      35.025        0.396</code></pre>
</div>
<div id="generalized-linear-model" class="section level3">
<h3><span class="header-section-number">5.1.2</span> Generalized Linear Model</h3>
<p>(In this case a logistic regression.)<br />
(in this code a dichtomous dependent variable is created using the cut() functions.)</p>
<div class="sourceCode"><pre class="sourceCode r"><code class="sourceCode r">USJudgeRatings<span class="op">$</span>RTEN_d &lt;-<span class="st"> </span><span class="kw">cut</span>(USJudgeRatings<span class="op">$</span>RTEN, <span class="kw">median</span>(USJudgeRatings<span class="op">$</span>RTEN))

<span class="kw">glm</span>(RTEN_d <span class="op">~</span><span class="st"> </span>INTG, <span class="dt">data =</span> USJudgeRatings, <span class="dt">family =</span> <span class="kw">binomial</span>())</code></pre></div>
<pre><code>## 
## Call:  glm(formula = RTEN_d ~ INTG, family = binomial(), data = USJudgeRatings)
## 
## Coefficients:
## (Intercept)         INTG  
##     -29.387        4.325  
## 
## Degrees of Freedom: 42 Total (i.e. Null);  41 Residual
## Null Deviance:       26.62 
## Residual Deviance: 8.603     AIC: 12.6</code></pre>
</div>
<div id="parametric-t-test" class="section level3">
<h3><span class="header-section-number">5.1.3</span> Parametric t test</h3>
<div class="sourceCode"><pre class="sourceCode r"><code class="sourceCode r"><span class="kw">t.test</span>(extra <span class="op">~</span><span class="st"> </span>group, <span class="dt">data =</span> sleep)</code></pre></div>
<pre><code>## 
##  Welch Two Sample t-test
## 
## data:  extra by group
## t = -1.8608, df = 17.776, p-value = 0.07939
## alternative hypothesis: true difference in means is not equal to 0
## 95 percent confidence interval:
##  -3.3654832  0.2054832
## sample estimates:
## mean in group 1 mean in group 2 
##            0.75            2.33</code></pre>
</div>
</div>
<div id="using-group_by" class="section level2">
<h2><span class="header-section-number">5.2</span> Using group_by</h2>
<p>Another way to look at the relationship between variables is to compare values of statistics for different groups.</p>
<p>In this case one way to do this is with the group_by function from the <code>dplyr</code> package.</p>
<p>Once you group your data there are a number of other functions within dplyr and in other packages that will use the groups to organize the results</p>
<div class="sourceCode"><pre class="sourceCode r"><code class="sourceCode r"><span class="kw">library</span>(magrittr)
iris <span class="op">%&gt;%</span><span class="st"> </span>dplyr<span class="op">::</span><span class="kw">group_by</span>(Species)  <span class="op">%&gt;%</span>
<span class="st">         </span>dplyr<span class="op">::</span><span class="kw">summarize</span>(<span class="dt">mean_sepal_length =</span> <span class="kw">mean</span>(Sepal.Length),
                          <span class="dt">median_sepal_legth =</span> <span class="kw">median</span>(Sepal.Length),
                          <span class="dt">Upper_CI =</span> <span class="kw">mean</span>(Sepal.Length) <span class="op">+</span><span class="st"> </span><span class="fl">1.96</span><span class="op">*</span><span class="kw">sd</span>(Sepal.Length),
                          <span class="dt">Lower_CI =</span> <span class="kw">mean</span>(Sepal.Length) <span class="op">-</span><span class="st"> </span><span class="fl">1.96</span><span class="op">*</span><span class="kw">sd</span>(Sepal.Length)
                          )</code></pre></div>
<pre><code>## # A tibble: 3 x 5
##   Species    mean_sepal_length median_sepal_legth Upper_CI Lower_CI
##   &lt;fct&gt;                  &lt;dbl&gt;              &lt;dbl&gt;    &lt;dbl&gt;    &lt;dbl&gt;
## 1 setosa                  5.01                5       5.70     4.32
## 2 versicolor              5.94                5.9     6.95     4.92
## 3 virginica               6.59                6.5     7.83     5.34</code></pre>
<div class="sourceCode"><pre class="sourceCode r"><code class="sourceCode r">iris <span class="op">%&gt;%</span><span class="st"> </span>dplyr<span class="op">::</span><span class="kw">group_by</span>(Species)  <span class="op">%&gt;%</span><span class="st"> </span>skimr<span class="op">::</span><span class="kw">skim</span>()</code></pre></div>
<table>
<caption><span id="tab:unnamed-chunk-9">Table 5.1: </span>Data summary</caption>
<tbody>
<tr class="odd">
<td align="left">Number of rows</td>
<td align="left">150</td>
</tr>
<tr class="even">
<td align="left">Number of columns</td>
<td align="left">5</td>
</tr>
<tr class="odd">
<td align="left">Name</td>
<td align="left">Piped data</td>
</tr>
<tr class="even">
<td align="left">Column type frequency</td>
<td align="left"></td>
</tr>
<tr class="odd">
<td align="left">numeric</td>
<td align="left">4</td>
</tr>
<tr class="even">
<td align="left">Group variables</td>
<td align="left">Species</td>
</tr>
</tbody>
</table>
<p><strong>Variable type: numeric</strong></p>
<table>
<thead>
<tr class="header">
<th align="left">skim_variable</th>
<th align="left">Species</th>
<th align="right">missing</th>
<th align="right">complete</th>
<th align="right">n</th>
<th align="right">mean</th>
<th align="right">sd</th>
<th align="right">p0</th>
<th align="right">p25</th>
<th align="right">p50</th>
<th align="right">p75</th>
<th align="right">p100</th>
<th align="left">hist</th>
</tr>
</thead>
<tbody>
<tr class="odd">
<td align="left">Sepal.Length</td>
<td align="left">setosa</td>
<td align="right">0</td>
<td align="right">50</td>
<td align="right">50</td>
<td align="right">5.01</td>
<td align="right">0.35</td>
<td align="right">4.3</td>
<td align="right">4.80</td>
<td align="right">5.00</td>
<td align="right">5.20</td>
<td align="right">5.8</td>
<td align="left">▃▃▇▅▁</td>
</tr>
<tr class="even">
<td align="left">Sepal.Length</td>
<td align="left">versicolor</td>
<td align="right">0</td>
<td align="right">50</td>
<td align="right">50</td>
<td align="right">5.94</td>
<td align="right">0.52</td>
<td align="right">4.9</td>
<td align="right">5.60</td>
<td align="right">5.90</td>
<td align="right">6.30</td>
<td align="right">7.0</td>
<td align="left">▂▇▆▃▃</td>
</tr>
<tr class="odd">
<td align="left">Sepal.Length</td>
<td align="left">virginica</td>
<td align="right">0</td>
<td align="right">50</td>
<td align="right">50</td>
<td align="right">6.59</td>
<td align="right">0.64</td>
<td align="right">4.9</td>
<td align="right">6.23</td>
<td align="right">6.50</td>
<td align="right">6.90</td>
<td align="right">7.9</td>
<td align="left">▁▃▇▃▂</td>
</tr>
<tr class="even">
<td align="left">Sepal.Width</td>
<td align="left">setosa</td>
<td align="right">0</td>
<td align="right">50</td>
<td align="right">50</td>
<td align="right">3.43</td>
<td align="right">0.38</td>
<td align="right">2.3</td>
<td align="right">3.20</td>
<td align="right">3.40</td>
<td align="right">3.68</td>
<td align="right">4.4</td>
<td align="left">▁▃▇▅▂</td>
</tr>
<tr class="odd">
<td align="left">Sepal.Width</td>
<td align="left">versicolor</td>
<td align="right">0</td>
<td align="right">50</td>
<td align="right">50</td>
<td align="right">2.77</td>
<td align="right">0.31</td>
<td align="right">2.0</td>
<td align="right">2.52</td>
<td align="right">2.80</td>
<td align="right">3.00</td>
<td align="right">3.4</td>
<td align="left">▁▅▆▇▂</td>
</tr>
<tr class="even">
<td align="left">Sepal.Width</td>
<td align="left">virginica</td>
<td align="right">0</td>
<td align="right">50</td>
<td align="right">50</td>
<td align="right">2.97</td>
<td align="right">0.32</td>
<td align="right">2.2</td>
<td align="right">2.80</td>
<td align="right">3.00</td>
<td align="right">3.18</td>
<td align="right">3.8</td>
<td align="left">▂▆▇▅▁</td>
</tr>
<tr class="odd">
<td align="left">Petal.Length</td>
<td align="left">setosa</td>
<td align="right">0</td>
<td align="right">50</td>
<td align="right">50</td>
<td align="right">1.46</td>
<td align="right">0.17</td>
<td align="right">1.0</td>
<td align="right">1.40</td>
<td align="right">1.50</td>
<td align="right">1.58</td>
<td align="right">1.9</td>
<td align="left">▁▃▇▃▁</td>
</tr>
<tr class="even">
<td align="left">Petal.Length</td>
<td align="left">versicolor</td>
<td align="right">0</td>
<td align="right">50</td>
<td align="right">50</td>
<td align="right">4.26</td>
<td align="right">0.47</td>
<td align="right">3.0</td>
<td align="right">4.00</td>
<td align="right">4.35</td>
<td align="right">4.60</td>
<td align="right">5.1</td>
<td align="left">▂▂▇▇▆</td>
</tr>
<tr class="odd">
<td align="left">Petal.Length</td>
<td align="left">virginica</td>
<td align="right">0</td>
<td align="right">50</td>
<td align="right">50</td>
<td align="right">5.55</td>
<td align="right">0.55</td>
<td align="right">4.5</td>
<td align="right">5.10</td>
<td align="right">5.55</td>
<td align="right">5.88</td>
<td align="right">6.9</td>
<td align="left">▃▇▇▃▂</td>
</tr>
<tr class="even">
<td align="left">Petal.Width</td>
<td align="left">setosa</td>
<td align="right">0</td>
<td align="right">50</td>
<td align="right">50</td>
<td align="right">0.25</td>
<td align="right">0.11</td>
<td align="right">0.1</td>
<td align="right">0.20</td>
<td align="right">0.20</td>
<td align="right">0.30</td>
<td align="right">0.6</td>
<td align="left">▇▂▂▁▁</td>
</tr>
<tr class="odd">
<td align="left">Petal.Width</td>
<td align="left">versicolor</td>
<td align="right">0</td>
<td align="right">50</td>
<td align="right">50</td>
<td align="right">1.33</td>
<td align="right">0.20</td>
<td align="right">1.0</td>
<td align="right">1.20</td>
<td align="right">1.30</td>
<td align="right">1.50</td>
<td align="right">1.8</td>
<td align="left">▅▇▃▆▁</td>
</tr>
<tr class="even">
<td align="left">Petal.Width</td>
<td align="left">virginica</td>
<td align="right">0</td>
<td align="right">50</td>
<td align="right">50</td>
<td align="right">2.03</td>
<td align="right">0.27</td>
<td align="right">1.4</td>
<td align="right">1.80</td>
<td align="right">2.00</td>
<td align="right">2.30</td>
<td align="right">2.5</td>
<td align="left">▂▇▆▅▇</td>
</tr>
</tbody>
</table>
</div>
<div id="entry-of-variables" class="section level2">
<h2><span class="header-section-number">5.3</span> Entry of variables</h2>
<p>Many R functions for multiple variables simply require that you enter the names of variables in the correct order. Sometimes the names will need to be in quotation marks <code>&quot;name&quot;</code> and sometimes not.</p>
<div id="cross-tabs" class="section level3">
<h3><span class="header-section-number">5.3.1</span> Cross tabs</h3>
<p>To do a cross tab (also known as two-way table or contingency table) we also use <code>tabyl()</code>. The basic function just gives counts for each combination. The first variable defines the rows and the second variable defines the columns.</p>
<div class="sourceCode"><pre class="sourceCode r"><code class="sourceCode r"><span class="kw">library</span>(magrittr)
<span class="kw">library</span>(janitor)</code></pre></div>
<pre><code>## Warning: package &#39;janitor&#39; was built under R version 3.4.4</code></pre>
<div class="sourceCode"><pre class="sourceCode r"><code class="sourceCode r">mtcars <span class="op">%&gt;%</span><span class="st"> </span><span class="kw">tabyl</span>(cyl, gear, <span class="dt">show_na =</span> <span class="ot">FALSE</span>)</code></pre></div>
<pre><code>##  cyl  3 4 5
##    4  1 8 2
##    6  2 4 1
##    8 12 0 2</code></pre>
<p>Piping to `adorn_title() will add the name of the second variable.</p>
<div class="sourceCode"><pre class="sourceCode r"><code class="sourceCode r">mtcars <span class="op">%&gt;%</span><span class="st"> </span><span class="kw">tabyl</span>(cyl, gear) <span class="op">%&gt;%</span>
<span class="st">           </span><span class="kw">adorn_title</span>()</code></pre></div>
<pre><code>##      gear    
##  cyl    3 4 5
##    4    1 8 2
##    6    2 4 1
##    8   12 0 2</code></pre>
<p>To change to proportions use the <code>adorn_percentages()</code> functions. In sociology we use the independent variable for the columns and the dependent variable for the rows. Therefore we use the column total for the denominator <code>adorn_percentages(denominator = &quot;col&quot;)</code>. Sometimes you might want to calculate row or total percents, in which case the denominator would be “row” or “all”.</p>
<div class="sourceCode"><pre class="sourceCode r"><code class="sourceCode r">mtcars <span class="op">%&gt;%</span><span class="st"> </span><span class="kw">tabyl</span>(cyl, gear) <span class="op">%&gt;%</span>
<span class="st">      </span><span class="kw">adorn_percentages</span>(<span class="dt">denominator =</span> <span class="st">&quot;col&quot;</span>) <span class="op">%&gt;%</span>
<span class="st">      </span><span class="kw">adorn_title</span>()</code></pre></div>
<pre><code>##                    gear                      
##  cyl                  3                 4   5
##    4 0.0666666666666667 0.666666666666667 0.4
##    6  0.133333333333333 0.333333333333333 0.2
##    8                0.8                 0 0.4</code></pre>
<p>To change the formatting to percentages pipe to the <code>adorn_pct_formatting()</code> function.</p>
<div class="sourceCode"><pre class="sourceCode r"><code class="sourceCode r">mtcars <span class="op">%&gt;%</span><span class="st"> </span><span class="kw">tabyl</span>(cyl, gear) <span class="op">%&gt;%</span>
<span class="st">      </span><span class="kw">adorn_percentages</span>(<span class="dt">denominator =</span> <span class="st">&quot;col&quot;</span>) <span class="op">%&gt;%</span>
<span class="st">      </span><span class="kw">adorn_pct_formatting</span>() <span class="op">%&gt;%</span>
<span class="st">      </span><span class="kw">adorn_ns</span>() <span class="op">%&gt;%</span>
<span class="st">      </span><span class="kw">adorn_title</span>()</code></pre></div>
<pre><code>##            gear                    
##  cyl          3         4         5
##    4  6.7%  (1) 66.7% (8) 40.0% (2)
##    6 13.3%  (2) 33.3% (4) 20.0% (1)
##    8 80.0% (12)  0.0% (0) 40.0% (2)</code></pre>
<p>You can also display both the numbers and the percentages.</p>
<div class="sourceCode"><pre class="sourceCode r"><code class="sourceCode r">mtcars <span class="op">%&gt;%</span><span class="st"> </span><span class="kw">tabyl</span>(cyl, gear) <span class="op">%&gt;%</span>
<span class="st">      </span><span class="kw">adorn_percentages</span>(<span class="dt">denominator =</span> <span class="st">&quot;col&quot;</span>) <span class="op">%&gt;%</span>
<span class="st">      </span><span class="kw">adorn_pct_formatting</span>() <span class="op">%&gt;%</span>
<span class="st">      </span><span class="kw">adorn_ns</span>() <span class="op">%&gt;%</span>
<span class="st">      </span><span class="kw">adorn_title</span>()</code></pre></div>
<pre><code>##            gear                    
##  cyl          3         4         5
##    4  6.7%  (1) 66.7% (8) 40.0% (2)
##    6 13.3%  (2) 33.3% (4) 20.0% (1)
##    8 80.0% (12)  0.0% (0) 40.0% (2)</code></pre>
<p>Adding a third variable will create separate tables for level of that variable.</p>
<div class="sourceCode"><pre class="sourceCode r"><code class="sourceCode r">mtcars <span class="op">%&gt;%</span><span class="st"> </span><span class="kw">tabyl</span>(cyl, gear, am) <span class="op">%&gt;%</span>
<span class="st">      </span><span class="kw">adorn_percentages</span>(<span class="dt">denominator =</span> <span class="st">&quot;col&quot;</span>) <span class="op">%&gt;%</span>
<span class="st">      </span><span class="kw">adorn_pct_formatting</span>() <span class="op">%&gt;%</span>
<span class="st">      </span><span class="kw">adorn_title</span>()</code></pre></div>
<pre><code>## $`0`
##       gear        
##  cyl     3     4 5
##    4  6.7% 50.0% -
##    6 13.3% 50.0% -
##    8 80.0%  0.0% -
## 
## $`1`
##      gear            
##  cyl    3     4     5
##    4    - 75.0% 40.0%
##    6    - 25.0% 20.0%
##    8    -  0.0% 40.0%</code></pre>
<p>You can also pipe to the <code>knitr::kable()</code> function to get a more polished table (see Chapter 2)</p>

</div>
</div>
</div>
            </section>

          </div>
        </div>
      </div>
<a href="errors.html" class="navigation navigation-prev " aria-label="Previous page"><i class="fa fa-angle-left"></i></a>
<a href="graphs.html" class="navigation navigation-next " aria-label="Next page"><i class="fa fa-angle-right"></i></a>
    </div>
  </div>
<script src="libs/gitbook-2.6.7/js/app.min.js"></script>
<script src="libs/gitbook-2.6.7/js/lunr.js"></script>
<script src="libs/gitbook-2.6.7/js/plugin-search.js"></script>
<script src="libs/gitbook-2.6.7/js/plugin-sharing.js"></script>
<script src="libs/gitbook-2.6.7/js/plugin-fontsettings.js"></script>
<script src="libs/gitbook-2.6.7/js/plugin-bookdown.js"></script>
<script src="libs/gitbook-2.6.7/js/jquery.highlight.js"></script>
<script>
gitbook.require(["gitbook"], function(gitbook) {
gitbook.start({
"sharing": {
"github": false,
"facebook": true,
"twitter": true,
"google": false,
"linkedin": false,
"weibo": false,
"instapaper": false,
"vk": false,
"all": ["facebook", "google", "twitter", "linkedin", "weibo", "instapaper"]
},
"fontsettings": {
"theme": "white",
"family": "sans",
"size": 2
},
"edit": {
"link": null,
"text": null
},
"history": {
"link": null,
"text": null
},
"download": ["bookdown-start.pdf", "bookdown-start.epub"],
"toc": {
"collapse": "subsection"
}
});
});
</script>

</body>

</html>
