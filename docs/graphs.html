<!DOCTYPE html>
<html >

<head>

  <meta charset="UTF-8">
  <meta http-equiv="X-UA-Compatible" content="IE=edge">
  <title>A Little R Book for Lehman Sociology Students</title>
  <meta name="description" content="Things you should know or that may help">
  <meta name="generator" content="bookdown 0.5 and GitBook 2.6.7">

  <meta property="og:title" content="A Little R Book for Lehman Sociology Students" />
  <meta property="og:type" content="book" />
  <meta property="og:url" content="https://github.com.com/lehmansociology/book/" />
  
  <meta property="og:description" content="Things you should know or that may help" />
  <meta name="github-repo" content="lehmansociology/book" />

  <meta name="twitter:card" content="summary" />
  <meta name="twitter:title" content="A Little R Book for Lehman Sociology Students" />
  
  <meta name="twitter:description" content="Things you should know or that may help" />
  

<meta name="author" content="Lehman Sociology">


<meta name="date" content="2017-10-19">

  <meta name="viewport" content="width=device-width, initial-scale=1">
  <meta name="apple-mobile-web-app-capable" content="yes">
  <meta name="apple-mobile-web-app-status-bar-style" content="black">
  
  
<link rel="prev" href="statistics-for-multiple-variables.html">
<link rel="next" href="other.html">
<script src="libs/jquery-2.2.3/jquery.min.js"></script>
<link href="libs/gitbook-2.6.7/css/style.css" rel="stylesheet" />
<link href="libs/gitbook-2.6.7/css/plugin-bookdown.css" rel="stylesheet" />
<link href="libs/gitbook-2.6.7/css/plugin-highlight.css" rel="stylesheet" />
<link href="libs/gitbook-2.6.7/css/plugin-search.css" rel="stylesheet" />
<link href="libs/gitbook-2.6.7/css/plugin-fontsettings.css" rel="stylesheet" />









<style type="text/css">
div.sourceCode { overflow-x: auto; }
table.sourceCode, tr.sourceCode, td.lineNumbers, td.sourceCode {
  margin: 0; padding: 0; vertical-align: baseline; border: none; }
table.sourceCode { width: 100%; line-height: 100%; }
td.lineNumbers { text-align: right; padding-right: 4px; padding-left: 4px; color: #aaaaaa; border-right: 1px solid #aaaaaa; }
td.sourceCode { padding-left: 5px; }
code > span.kw { color: #007020; font-weight: bold; } /* Keyword */
code > span.dt { color: #902000; } /* DataType */
code > span.dv { color: #40a070; } /* DecVal */
code > span.bn { color: #40a070; } /* BaseN */
code > span.fl { color: #40a070; } /* Float */
code > span.ch { color: #4070a0; } /* Char */
code > span.st { color: #4070a0; } /* String */
code > span.co { color: #60a0b0; font-style: italic; } /* Comment */
code > span.ot { color: #007020; } /* Other */
code > span.al { color: #ff0000; font-weight: bold; } /* Alert */
code > span.fu { color: #06287e; } /* Function */
code > span.er { color: #ff0000; font-weight: bold; } /* Error */
code > span.wa { color: #60a0b0; font-weight: bold; font-style: italic; } /* Warning */
code > span.cn { color: #880000; } /* Constant */
code > span.sc { color: #4070a0; } /* SpecialChar */
code > span.vs { color: #4070a0; } /* VerbatimString */
code > span.ss { color: #bb6688; } /* SpecialString */
code > span.im { } /* Import */
code > span.va { color: #19177c; } /* Variable */
code > span.cf { color: #007020; font-weight: bold; } /* ControlFlow */
code > span.op { color: #666666; } /* Operator */
code > span.bu { } /* BuiltIn */
code > span.ex { } /* Extension */
code > span.pp { color: #bc7a00; } /* Preprocessor */
code > span.at { color: #7d9029; } /* Attribute */
code > span.do { color: #ba2121; font-style: italic; } /* Documentation */
code > span.an { color: #60a0b0; font-weight: bold; font-style: italic; } /* Annotation */
code > span.cv { color: #60a0b0; font-weight: bold; font-style: italic; } /* CommentVar */
code > span.in { color: #60a0b0; font-weight: bold; font-style: italic; } /* Information */
</style>

<link rel="stylesheet" href="style.css" type="text/css" />
</head>

<body>



  <div class="book without-animation with-summary font-size-2 font-family-1" data-basepath=".">

    <div class="book-summary">
      <nav role="navigation">

<ul class="summary">
<li><a href="./">A Book of Useful R Information</a></li>

<li class="divider"></li>
<li class="chapter" data-level="" data-path="index.html"><a href="index.html"><i class="fa fa-check"></i>Preface</a></li>
<li class="chapter" data-level="1" data-path="introduction.html"><a href="introduction.html"><i class="fa fa-check"></i><b>1</b> Introduction</a></li>
<li class="chapter" data-level="2" data-path="statistical-functions-for-one-variable.html"><a href="statistical-functions-for-one-variable.html"><i class="fa fa-check"></i><b>2</b> Statistical Functions (for one variable)</a><ul>
<li class="chapter" data-level="2.1" data-path="statistical-functions-for-one-variable.html"><a href="statistical-functions-for-one-variable.html#these-are-from-core-r"><i class="fa fa-check"></i><b>2.1</b> These are from core R</a></li>
<li class="chapter" data-level="2.2" data-path="statistical-functions-for-one-variable.html"><a href="statistical-functions-for-one-variable.html#these-are-from-lehmansociology"><i class="fa fa-check"></i><b>2.2</b> These are from lehmansociology</a></li>
</ul></li>
<li class="chapter" data-level="3" data-path="code.html"><a href="code.html"><i class="fa fa-check"></i><b>3</b> Code</a><ul>
<li class="chapter" data-level="3.1" data-path="code.html"><a href="code.html#assignment-operator"><i class="fa fa-check"></i><b>3.1</b> Assignment operator</a></li>
<li class="chapter" data-level="3.2" data-path="code.html"><a href="code.html#combine-function"><i class="fa fa-check"></i><b>3.2</b> Combine function</a></li>
<li class="chapter" data-level="3.3" data-path="code.html"><a href="code.html#pipe-operator"><i class="fa fa-check"></i><b>3.3</b> Pipe operator</a></li>
<li class="chapter" data-level="3.4" data-path="code.html"><a href="code.html#basic-math-operations"><i class="fa fa-check"></i><b>3.4</b> Basic math operations</a></li>
<li class="chapter" data-level="3.5" data-path="code.html"><a href="code.html#comparison-operators"><i class="fa fa-check"></i><b>3.5</b> Comparison operators</a></li>
<li class="chapter" data-level="3.6" data-path="code.html"><a href="code.html#and-and-or-logical-operators"><i class="fa fa-check"></i><b>3.6</b> AND and OR (logical operators)</a></li>
</ul></li>
<li class="chapter" data-level="4" data-path="errors.html"><a href="errors.html"><i class="fa fa-check"></i><b>4</b> Errors</a><ul>
<li class="chapter" data-level="4.1" data-path="errors.html"><a href="errors.html#could-not-find-function"><i class="fa fa-check"></i><b>4.1</b> Could not find function</a></li>
<li class="chapter" data-level="4.2" data-path="errors.html"><a href="errors.html#problems-with-variables"><i class="fa fa-check"></i><b>4.2</b> Problems with variables</a></li>
<li class="chapter" data-level="4.3" data-path="errors.html"><a href="errors.html#problems-with-markdown"><i class="fa fa-check"></i><b>4.3</b> Problems with markdown</a></li>
<li class="chapter" data-level="4.4" data-path="errors.html"><a href="errors.html#other-problems-when-knittng"><i class="fa fa-check"></i><b>4.4</b> Other problems when knittng</a></li>
</ul></li>
<li class="chapter" data-level="5" data-path="statistics-for-multiple-variables.html"><a href="statistics-for-multiple-variables.html"><i class="fa fa-check"></i><b>5</b> Statistics for Multiple Variables</a><ul>
<li class="chapter" data-level="5.1" data-path="statistics-for-multiple-variables.html"><a href="statistics-for-multiple-variables.html#using-formula-notation"><i class="fa fa-check"></i><b>5.1</b> Using formula notation</a></li>
<li class="chapter" data-level="5.2" data-path="statistics-for-multiple-variables.html"><a href="statistics-for-multiple-variables.html#using-group_by"><i class="fa fa-check"></i><b>5.2</b> Using group_by</a></li>
</ul></li>
<li class="chapter" data-level="6" data-path="graphs.html"><a href="graphs.html"><i class="fa fa-check"></i><b>6</b> Graphs</a><ul>
<li class="chapter" data-level="6.1" data-path="graphs.html"><a href="graphs.html#how-ggplot-works"><i class="fa fa-check"></i><b>6.1</b> How ggplot works</a><ul>
<li class="chapter" data-level="6.1.1" data-path="graphs.html"><a href="graphs.html#ggplot"><i class="fa fa-check"></i><b>6.1.1</b> ggplot()</a></li>
<li class="chapter" data-level="6.1.2" data-path="graphs.html"><a href="graphs.html#adding-geom"><i class="fa fa-check"></i><b>6.1.2</b> Adding geom</a></li>
<li class="chapter" data-level="6.1.3" data-path="graphs.html"><a href="graphs.html#add-titles-and-labels-modify-axes"><i class="fa fa-check"></i><b>6.1.3</b> Add titles and labels, modify axes</a></li>
</ul></li>
<li class="chapter" data-level="6.2" data-path="graphs.html"><a href="graphs.html#common-problems"><i class="fa fa-check"></i><b>6.2</b> Common problems</a><ul>
<li class="chapter" data-level="6.2.1" data-path="graphs.html"><a href="graphs.html#unexpected-symbol"><i class="fa fa-check"></i><b>6.2.1</b> unexpected symbol</a></li>
<li class="chapter" data-level="6.2.2" data-path="graphs.html"><a href="graphs.html#invalid-argument-to-unary-operator"><i class="fa fa-check"></i><b>6.2.2</b> invalid argument to unary operator</a></li>
<li class="chapter" data-level="6.2.3" data-path="graphs.html"><a href="graphs.html#error-unexpected"><i class="fa fa-check"></i><b>6.2.3</b> Error: unexpected ‘)’</a></li>
</ul></li>
</ul></li>
<li class="chapter" data-level="7" data-path="other.html"><a href="other.html"><i class="fa fa-check"></i><b>7</b> Other</a></li>
<li class="divider"></li>
<li><a href="https://github.com/rstudio/bookdown" target="blank">Published with bookdown</a></li>

</ul>

      </nav>
    </div>

    <div class="book-body">
      <div class="body-inner">
        <div class="book-header" role="navigation">
          <h1>
            <i class="fa fa-circle-o-notch fa-spin"></i><a href="./">A Little R Book for Lehman Sociology Students</a>
          </h1>
        </div>

        <div class="page-wrapper" tabindex="-1" role="main">
          <div class="page-inner">

            <section class="normal" id="section-">
<div id="graphs" class="section level1">
<h1><span class="header-section-number">Chapter 6</span> Graphs</h1>
<p>In our classes we primarily use the ggplot2 package for graphing.</p>
<p>Remember htat you will need to load the package <code>library(ggplot2)</code>.</p>
<p>As a package is is very flexible and provides many options that will let you do just about any visualization, but this can make it seem complicated when you are starting out learning it.</p>
<div id="how-ggplot-works" class="section level2">
<h2><span class="header-section-number">6.1</span> How ggplot works</h2>
<p>Ggplot constructs a graph by building it up piece by piece, with the parts connected with <code>+</code> signs.</p>
<div id="ggplot" class="section level3">
<h3><span class="header-section-number">6.1.1</span> ggplot()</h3>
<p>A ggplot always starts with the <code>ggplot()</code> function. For beginners, the important thing to know is that this function sets up the axes for your plot. To do this you n provide the name of the data set and the name of the x variable and the y variable (if needed). Notice how the three axes below differ depending on how many variables there are and what kind of variable they are. The variable information goes inside the <code>aes()</code> which is short for aesthetics.</p>
<div class="sourceCode"><pre class="sourceCode r"><code class="sourceCode r"><span class="kw">library</span>(ggplot2)

<span class="kw">ggplot</span>(iris, <span class="kw">aes</span>(<span class="dt">x =</span> Sepal.Length)) </code></pre></div>
<p><img src="06-Graphs_files/figure-html/unnamed-chunk-1-1.png" width="672" /></p>
<div class="sourceCode"><pre class="sourceCode r"><code class="sourceCode r"><span class="kw">ggplot</span>(iris, <span class="kw">aes</span>(<span class="dt">x =</span> Sepal.Length, <span class="dt">y =</span> Sepal.Width))</code></pre></div>
<p><img src="06-Graphs_files/figure-html/unnamed-chunk-1-2.png" width="672" /></p>
<div class="sourceCode"><pre class="sourceCode r"><code class="sourceCode r"><span class="kw">ggplot</span>(iris, <span class="kw">aes</span>(<span class="dt">x =</span> Species, <span class="dt">y =</span> Sepal.Width))</code></pre></div>
<p><img src="06-Graphs_files/figure-html/unnamed-chunk-1-3.png" width="672" /></p>
</div>
<div id="adding-geom" class="section level3">
<h3><span class="header-section-number">6.1.2</span> Adding geom</h3>
<p>To add data to the axes you use a “geom” that determines the type of display. The geom does not modify the axis, it adds data to it. To show this, let’s save the ggplot information and add to it.</p>
<p>Our first example is only for one variable. Often, you will want to add options such as binwidth. The last example shows how to use a slightly different approach to graph the cumulative distribution (ecdf).</p>
<div class="sourceCode"><pre class="sourceCode r"><code class="sourceCode r">graph1 &lt;-<span class="st"> </span><span class="kw">ggplot</span>(iris, <span class="kw">aes</span>(<span class="dt">x =</span> Sepal.Length))  
graph1 +<span class="st"> </span><span class="kw">geom_histogram</span>()</code></pre></div>
<pre><code>## `stat_bin()` using `bins = 30`. Pick better value with `binwidth`.</code></pre>
<p><img src="06-Graphs_files/figure-html/unnamed-chunk-2-1.png" width="672" /></p>
<div class="sourceCode"><pre class="sourceCode r"><code class="sourceCode r">graph1 +<span class="st"> </span><span class="kw">geom_dotplot</span>(<span class="dt">binwidth =</span> .<span class="dv">1</span>)</code></pre></div>
<p><img src="06-Graphs_files/figure-html/unnamed-chunk-2-2.png" width="672" /></p>
<div class="sourceCode"><pre class="sourceCode r"><code class="sourceCode r">graph1 +<span class="st"> </span><span class="kw">geom_bar</span>()</code></pre></div>
<p><img src="06-Graphs_files/figure-html/unnamed-chunk-2-3.png" width="672" /></p>
<div class="sourceCode"><pre class="sourceCode r"><code class="sourceCode r">graph1 +<span class="st"> </span><span class="kw">geom_density</span>()</code></pre></div>
<p><img src="06-Graphs_files/figure-html/unnamed-chunk-2-4.png" width="672" /></p>
<div class="sourceCode"><pre class="sourceCode r"><code class="sourceCode r">graph1 +<span class="st"> </span><span class="kw">stat_ecdf</span>(<span class="dt">geom =</span> <span class="st">&quot;step&quot;</span>)</code></pre></div>
<p><img src="06-Graphs_files/figure-html/unnamed-chunk-2-5.png" width="672" /></p>
<p>Our second example uses two interval variables, so has different possibilities than the first. The second one shows one way that geoms can be combined.</p>
<div class="sourceCode"><pre class="sourceCode r"><code class="sourceCode r">graph2 &lt;-<span class="st"> </span><span class="kw">ggplot</span>(iris, <span class="kw">aes</span>(<span class="dt">x =</span> Sepal.Length, <span class="dt">y =</span> Sepal.Width))

graph2 +<span class="st"> </span><span class="kw">geom_point</span>()</code></pre></div>
<p><img src="06-Graphs_files/figure-html/unnamed-chunk-3-1.png" width="672" /></p>
<div class="sourceCode"><pre class="sourceCode r"><code class="sourceCode r">graph2 +<span class="st"> </span><span class="kw">geom_point</span>() +<span class="st"> </span><span class="kw">geom_smooth</span>()</code></pre></div>
<pre><code>## `geom_smooth()` using method = &#39;loess&#39;</code></pre>
<p><img src="06-Graphs_files/figure-html/unnamed-chunk-3-2.png" width="672" /></p>
<div class="sourceCode"><pre class="sourceCode r"><code class="sourceCode r">graph2_with_species &lt;-<span class="st"> </span><span class="kw">ggplot</span>(iris, <span class="kw">aes</span>(<span class="dt">x =</span> Sepal.Length, <span class="dt">y =</span> Sepal.Width, <span class="dt">color =</span> Species)) +<span class="st"> </span><span class="kw">geom_point</span>()
graph2_with_species</code></pre></div>
<p><img src="06-Graphs_files/figure-html/unnamed-chunk-3-3.png" width="672" /></p>
<p>This data includes two types of data. The last example shows how multiple geoms can be combined.</p>
<div class="sourceCode"><pre class="sourceCode r"><code class="sourceCode r">graph3 &lt;-<span class="st"> </span><span class="kw">ggplot</span>(iris, <span class="kw">aes</span>(<span class="dt">x =</span> Species, <span class="dt">y =</span> Sepal.Width))

graph3 +<span class="st"> </span><span class="kw">geom_point</span>()</code></pre></div>
<p><img src="06-Graphs_files/figure-html/unnamed-chunk-4-1.png" width="672" /></p>
<div class="sourceCode"><pre class="sourceCode r"><code class="sourceCode r">graph3 +<span class="st"> </span><span class="kw">geom_count</span>()</code></pre></div>
<p><img src="06-Graphs_files/figure-html/unnamed-chunk-4-2.png" width="672" /></p>
<div class="sourceCode"><pre class="sourceCode r"><code class="sourceCode r">graph3 +<span class="st"> </span><span class="kw">geom_jitter</span>()</code></pre></div>
<p><img src="06-Graphs_files/figure-html/unnamed-chunk-4-3.png" width="672" /></p>
<div class="sourceCode"><pre class="sourceCode r"><code class="sourceCode r">graph3 +<span class="st"> </span><span class="kw">geom_boxplot</span>()</code></pre></div>
<p><img src="06-Graphs_files/figure-html/unnamed-chunk-4-4.png" width="672" /></p>
<div class="sourceCode"><pre class="sourceCode r"><code class="sourceCode r">graph3 +<span class="st"> </span><span class="kw">geom_boxplot</span>() +<span class="st"> </span><span class="kw">geom_jitter</span>()</code></pre></div>
<p><img src="06-Graphs_files/figure-html/unnamed-chunk-4-5.png" width="672" /></p>
</div>
<div id="add-titles-and-labels-modify-axes" class="section level3">
<h3><span class="header-section-number">6.1.3</span> Add titles and labels, modify axes</h3>
<p>There are many additional options that you can use. This document will just show how to add a title and labels and modify axes.</p>
<div class="sourceCode"><pre class="sourceCode r"><code class="sourceCode r">graph3 +<span class="st"> </span><span class="kw">geom_jitter</span>() +
<span class="st">        </span><span class="kw">ggtitle</span>(<span class="st">&quot;Sepal Width by Species in the Iris Data&quot;</span>) +
<span class="st">        </span><span class="kw">labs</span>(<span class="dt">y=</span><span class="st">&quot;Sepal Width&quot;</span>, <span class="dt">x=</span><span class="st">&quot;Iris Species&quot;</span>)  </code></pre></div>
<p><img src="06-Graphs_files/figure-html/unnamed-chunk-5-1.png" width="672" /></p>
<p>The way to modify axes is to use <code>scale_y_continuous</code> and <code>scale_x_continuous</code>. These are very flexible and have many options. This section will show how to change or improve some of the previous plots.</p>
<div class="sourceCode"><pre class="sourceCode r"><code class="sourceCode r"><span class="co"># Remove irrelevant y axis values</span>
graph1 +<span class="st"> </span><span class="kw">geom_dotplot</span>(<span class="dt">binwidth =</span> .<span class="dv">1</span>) +
<span class="st">         </span><span class="kw">scale_y_continuous</span>(<span class="ot">NULL</span>, <span class="dt">breaks =</span> <span class="ot">NULL</span>)</code></pre></div>
<p><img src="06-Graphs_files/figure-html/unnamed-chunk-6-1.png" width="672" /></p>
<div class="sourceCode"><pre class="sourceCode r"><code class="sourceCode r"><span class="co"># Use the same tick marks on the x axis match those on the y axis</span>
graph2 +<span class="st"> </span><span class="kw">geom_point</span>() +<span class="st"> </span><span class="kw">scale_x_continuous</span>( <span class="dt">breaks =</span> <span class="kw">seq</span>(<span class="dv">4</span>, <span class="dv">8</span>, .<span class="dv">5</span>), <span class="dt">minor_breaks =</span> <span class="kw">waiver</span>())</code></pre></div>
<p><img src="06-Graphs_files/figure-html/unnamed-chunk-6-2.png" width="672" /></p>
<p>There are several websites that give detailed examples of more complex ways to create visualizations.</p>
</div>
</div>
<div id="common-problems" class="section level2">
<h2><span class="header-section-number">6.2</span> Common problems</h2>
<p>Some of the most common problems in ggplot are the same as any other code in R, misspelling names, using the wrong graph for your data type, or having a problem with your tick marks.</p>
<p>Here are some errors that you are most likely to see when using ggplot.</p>
<div id="unexpected-symbol" class="section level3">
<h3><span class="header-section-number">6.2.1</span> unexpected symbol</h3>
<p>This happens when you forget to put a <code>+</code> between the different parts of your plot.</p>
<div class="sourceCode"><pre class="sourceCode r"><code class="sourceCode r">graph3  <span class="kw">geom_jitter</span>()
Error:<span class="st"> </span>unexpected symbol in <span class="st">&quot;graph3  geom_jitter&quot;</span></code></pre></div>
</div>
<div id="invalid-argument-to-unary-operator" class="section level3">
<h3><span class="header-section-number">6.2.2</span> invalid argument to unary operator</h3>
<p>This happens if you have an extra <code>+</code>.</p>
<div class="sourceCode"><pre class="sourceCode r"><code class="sourceCode r"> graph3 +<span class="st"> </span>+<span class="st"> </span><span class="kw">geom_jitter</span>()
Error in +<span class="kw">geom_jitter</span>() :<span class="st"> </span>invalid argument to unary operator</code></pre></div>
</div>
<div id="error-unexpected" class="section level3">
<h3><span class="header-section-number">6.2.3</span> Error: unexpected ‘)’</h3>
<p>This happens if you have an extra closing parenthesis.</p>
<div class="sourceCode"><pre class="sourceCode r"><code class="sourceCode r">graph2 &lt;-<span class="st"> </span><span class="kw">ggplot</span>(iris, <span class="kw">aes</span>(<span class="dt">x =</span> Sepal.Length, <span class="dt">y =</span> Sepal.Width))<span class="er">)</span>
Error:<span class="st"> </span>unexpected <span class="st">&#39;)&#39;</span> in <span class="st">&quot;graph2 &lt;- ggplot(iris, aes(x = Sepal.Length, y = Sepal.Width)))&quot;</span></code></pre></div>

</div>
</div>
</div>
            </section>

          </div>
        </div>
      </div>
<a href="statistics-for-multiple-variables.html" class="navigation navigation-prev " aria-label="Previous page"><i class="fa fa-angle-left"></i></a>
<a href="other.html" class="navigation navigation-next " aria-label="Next page"><i class="fa fa-angle-right"></i></a>
    </div>
  </div>
<script src="libs/gitbook-2.6.7/js/app.min.js"></script>
<script src="libs/gitbook-2.6.7/js/lunr.js"></script>
<script src="libs/gitbook-2.6.7/js/plugin-search.js"></script>
<script src="libs/gitbook-2.6.7/js/plugin-sharing.js"></script>
<script src="libs/gitbook-2.6.7/js/plugin-fontsettings.js"></script>
<script src="libs/gitbook-2.6.7/js/plugin-bookdown.js"></script>
<script src="libs/gitbook-2.6.7/js/jquery.highlight.js"></script>
<script>
gitbook.require(["gitbook"], function(gitbook) {
gitbook.start({
"sharing": {
"github": false,
"facebook": true,
"twitter": true,
"google": false,
"weibo": false,
"instapper": false,
"vk": false,
"all": ["facebook", "google", "twitter", "weibo", "instapaper"]
},
"fontsettings": {
"theme": "white",
"family": "sans",
"size": 2
},
"edit": {
"link": null,
"text": null
},
"download": null,
"toc": {
"collapse": "subsection"
}
});
});
</script>

</body>

</html>
